CREATE TABLE  "CM_COURSE" 
   (	"COURSE_ID" NUMBER(4,0), 
	"COURSE_NAME" VARCHAR2(32) NOT NULL ENABLE, 
	"DURATION" VARCHAR2(32) NOT NULL ENABLE, 
	"FEES" NUMBER(6,0) NOT NULL ENABLE, 
	"CLASS" NUMBER(2,0) NOT NULL ENABLE, 
	"ENABLED" CHAR(1) DEFAULT 1 NOT NULL ENABLE, 
	"TYPE" VARCHAR2(10), 
	 CHECK (class >= 9 AND class <= 12) ENABLE, 
	 CHECK (enabled IN (0,1)) ENABLE, 
	 PRIMARY KEY ("COURSE_ID") ENABLE, 
	 CONSTRAINT "CM_COURSE_CON" CHECK (LOWER("TYPE")='fresher' OR LOWER("TYPE")='dropper' OR LOWER("TYPE")='crash') ENABLE
   )
/


CREATE INDEX  "CM_COURSE_IDX1" ON  "CM_COURSE" ("COURSE_NAME", "CLASS", "TYPE", "ENABLED")
/

CREATE TABLE  "CM_COURSE_SUBJECT_TEACHER" 
   (	"COURSE_ID" NUMBER(4,0) NOT NULL ENABLE, 
	"SUBJECT_ID" NUMBER(4,0) NOT NULL ENABLE, 
	"STAFF_ID" NUMBER(4,0) NOT NULL ENABLE, 
	 CONSTRAINT "CM_COURSE_SUBJECT_TEACHER_CON" FOREIGN KEY ("COURSE_ID")
	  REFERENCES  "CM_COURSE" ("COURSE_ID") ENABLE, 
	 CONSTRAINT "CM_COURSE_SUBJECT_TEACHER_CON1" FOREIGN KEY ("SUBJECT_ID")
	  REFERENCES  "CM_SUBJECT" ("SUBJECT_ID") ENABLE, 
	 CONSTRAINT "CM_COURSE_SUBJECT_TEACHER_CON2" FOREIGN KEY ("STAFF_ID")
	  REFERENCES  "CM_STAFF" ("STAFF_ID") ENABLE
   )
/

CREATE TABLE  "CM_STAFF" 
   (	"STAFF_ID" NUMBER(4,0), 
	"FIRST_NAME" VARCHAR2(32) NOT NULL ENABLE, 
	"LAST_NAME" VARCHAR2(32) NOT NULL ENABLE, 
	"ADDRESS_LINE_1" VARCHAR2(32) NOT NULL ENABLE, 
	"ADDRESS_LINE_2" VARCHAR2(32) NOT NULL ENABLE, 
	"CITY" VARCHAR2(16) DEFAULT 'Bhopal' NOT NULL ENABLE, 
	"PIN_CODE" NUMBER(6,0) NOT NULL ENABLE, 
	"PHONE_NUMBER" CHAR(12), 
	"CELL_NUMBER" CHAR(10), 
	"DATE_HIRE" DATE DEFAULT sysdate NOT NULL ENABLE, 
	"DATE_LEAVE" DATE, 
	"JOB_TYPE" VARCHAR2(16) NOT NULL ENABLE, 
	"SALARY" NUMBER(7,0) NOT NULL ENABLE, 
	"EMAIL" VARCHAR2(50), 
	"MISC_INFO" VARCHAR2(1000), 
	"ENABLED" CHAR(1) DEFAULT 1 NOT NULL ENABLE, 
	 CHECK (enabled IN (0,1)) ENABLE, 
	 PRIMARY KEY ("STAFF_ID") ENABLE, 
	 UNIQUE ("EMAIL") ENABLE, 
	 CONSTRAINT "CM_STAFF_CON" CHECK (
	lower(job_type) IN ('teacher', 'receptionist', 'clerk', 'cashier', 'librarian','security guard')
) ENABLE
   )
/


CREATE INDEX  "CM_STAFF_IDX1" ON  "CM_STAFF" ("FIRST_NAME", "DATE_HIRE", "JOB_TYPE", "SALARY")
/


CREATE TABLE  "CM_STUDENT" 
   (	"STUDENT_ID" NUMBER(4,0), 
	"FIRST_NAME" VARCHAR2(32) NOT NULL ENABLE, 
	"LAST_NAME" VARCHAR2(32) NOT NULL ENABLE, 
	"ADDRESS_LINE_1" VARCHAR2(32) NOT NULL ENABLE, 
	"ADDRESS_LINE_2" VARCHAR2(32) NOT NULL ENABLE, 
	"CITY" VARCHAR2(16) DEFAULT 'Bhopal' NOT NULL ENABLE, 
	"PIN_CODE" NUMBER(6,0) NOT NULL ENABLE, 
	"PHONE_NUMBER" CHAR(12), 
	"CELL_NUMBER" CHAR(10), 
	"DATE_ADMISSION" DATE DEFAULT SYSDATE NOT NULL ENABLE, 
	"DATE_LEAVE" DATE, 
	"EMAIL" VARCHAR2(50), 
	"MISC_INFO" VARCHAR2(1000), 
	"ENABLED" CHAR(1) DEFAULT 1 NOT NULL ENABLE, 
	"BIRTH_DATE" DATE NOT NULL ENABLE, 
	"FATHER_NAME" VARCHAR2(32), 
	"MOTHER_NAME" VARCHAR2(32), 
	 CHECK (enabled IN (0,1)) ENABLE, 
	 PRIMARY KEY ("STUDENT_ID") ENABLE, 
	 CONSTRAINT "CM_STUDENT_CON" UNIQUE ("EMAIL") ENABLE
   )
/


CREATE INDEX  "CM_STUDENT_IDX1" ON  "CM_STUDENT" ("DATE_ADMISSION", "DATE_LEAVE", "FIRST_NAME", "ENABLED")
/


CREATE TABLE  "CM_STUDENT_COURSE" 
   (	"STUDENT_ID" NUMBER(4,0) NOT NULL ENABLE, 
	"COURSE_ID" NUMBER(4,0) NOT NULL ENABLE, 
	"DATE_STARTED" DATE NOT NULL ENABLE, 
	"DATE_ENDED" DATE, 
	 CONSTRAINT "CM_STUDENT_COURSE_CON" FOREIGN KEY ("STUDENT_ID")
	  REFERENCES  "CM_STUDENT" ("STUDENT_ID") ENABLE, 
	 CONSTRAINT "CM_STUDENT_COURSE_CON1" FOREIGN KEY ("COURSE_ID")
	  REFERENCES  "CM_COURSE" ("COURSE_ID") ENABLE
   )
/


CREATE INDEX  "CM_STUDENT_COURSE_IDX1" ON  "CM_STUDENT_COURSE" ("STUDENT_ID", "COURSE_ID")
/


CREATE TABLE  "CM_SUBJECT" 
   (	"SUBJECT_ID" NUMBER(4,0), 
	"SUBJECT_NAME" VARCHAR2(32) NOT NULL ENABLE, 
	 PRIMARY KEY ("SUBJECT_ID") ENABLE
   )
/


CREATE INDEX  "CM_SUBJECT_IDX1" ON  "CM_SUBJECT" ("SUBJECT_NAME")
/


CREATE SEQUENCE   "SEQ_COURSEID"  MINVALUE 1 MAXVALUE 999999999999999999999999999 INCREMENT BY 1 START WITH 50 CACHE 20 NOORDER  NOCYCLE
/

CREATE SEQUENCE   "SEQ_STAFFID"  MINVALUE 1 MAXVALUE 999999999999999999999999999 INCREMENT BY 1 START WITH 21 CACHE 20 NOORDER  NOCYCLE
/

CREATE SEQUENCE   "SEQ_STUDENTID"  MINVALUE 1 MAXVALUE 999999999999999999999999999 INCREMENT BY 1 START WITH 16 CACHE 20 NOORDER  NOCYCLE
/

CREATE SEQUENCE   "SEQ_SUBJECTID"  MINVALUE 1 MAXVALUE 999999999999999999999999999 INCREMENT BY 1 START WITH 7 CACHE 20 NOORDER  NOCYCLE
/

